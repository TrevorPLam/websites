### 12.6 Booking Reminder Job

**File:** `apps/*/src/app/api/jobs/booking/reminder/route.ts`

```typescript
import { createJobHandler } from '@repo/jobs/verify-qstash';
import { db } from '@repo/db';
import { sendBookingReminderEmail } from '@repo/email';

export const maxDuration = 30;

export const POST = createJobHandler<'booking.reminder'>(async (payload) => {
  const { tenantId, bookingId, reminderType } = payload;

  const { data: booking } = await db
    .from('bookings')
    .select('*, lead:leads(name, email, phone)')
    .eq('id', bookingId)
    .eq('tenant_id', tenantId)
    .single();

  if (!booking) return;
  if (booking.status !== 'confirmed') return; // Don't remind for cancelled

  await sendBookingReminderEmail({
    tenantId,
    booking,
    reminderType,
  });
});
```

---
