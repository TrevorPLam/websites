### 3.5 FSD Layer for Every Package

**Complete FSD Structure for `packages/ui/`:**

```
packages/ui/src/
├── app/                      # FSD: app layer (rarely used in shared package)
│   └── providers/
│       └── ThemeProvider.tsx
│
├── widgets/                  # FSD: widgets layer (complex layouts)
│   ├── header/
│   │   ├── ui/
│   │   │   └── Header.tsx
│   │   ├── model/
│   │   │   └── navigation.ts
│   │   └── index.ts
│   │
│   ├── footer/
│   │   ├── ui/
│   │   │   └── Footer.tsx
│   │   └── index.ts
│   │
│   └── cookie-banner/
│       ├── ui/
│       │   └── CookieBanner.tsx
│       ├── model/
│       │   └── consent.ts
│       └── index.ts
│
├── features/                 # FSD: features layer (user interactions)
│   ├── lead-form/
│   │   ├── ui/
│   │   │   ├── ContactForm.tsx
│   │   │   └── FormFields.tsx
│   │   ├── model/
│   │   │   ├── validation.ts
│   │   │   └── submit.ts
│   │   ├── api/
│   │   │   └── submitLead.ts
│   │   └── index.ts
│   │
│   ├── a-b-test/
│   │   ├── ui/
│   │   │   └── ABTestWrapper.tsx
│   │   ├── model/
│   │   │   ├── variant.ts
│   │   │   └── tracking.ts
│   │   └── index.ts
│   │
│   └── booking-widget/
│       ├── ui/
│       │   └── BookingForm.tsx
│       ├── model/
│       │   └── availability.ts
│       └── index.ts
│
├── entities/                 # FSD: entities layer (business concepts)
│   ├── lead/
│   │   ├── model/
│   │   │   └── lead.ts
│   │   ├── api/
│   │   │   └── leadApi.ts
│   │   ├── @x/                # Cross-slice imports
│   │   │   └── index.ts
│   │   └── index.ts
│   │
│   ├── tenant/
│   │   ├── model/
│   │   │   └── tenant.ts
│   │   ├── api/
│   │   │   └── tenantApi.ts
│   │   ├── @x/
│   │   │   └── index.ts
│   │   └── index.ts
│   │
│   └── user/
│       ├── model/
│       │   └── user.ts
│       ├── @x/
│       │   └── index.ts
│       └── index.ts
│
└── shared/                   # FSD: shared layer (low-level)
    ├── ui/                   # UI primitives
    │   ├── Button/
    │   │   ├── Button.tsx
    │   │   ├── Button.stories.tsx
    │   │   └── index.ts
    │   ├── Card/
    │   │   ├── Card.tsx
    │   │   └── index.ts
    │   ├── Input/
    │   │   ├── Input.tsx
    │   │   └── index.ts
    │   └── index.ts
    │
    ├── lib/                  # Utilities
    │   ├── format/
    │   │   └── currency.ts
    │   ├── validation/
    │   │   └── email.ts
    │   └── hooks/
    │       ├── useMediaQuery.ts
    │       └── useLocalStorage.ts
    │
    ├── api/                  # API clients
    │   ├── supabase.ts
    │   └── fetch.ts
    │
    └── config/               # Constants
        └── routes.ts
```

**Public API Pattern:**

Every slice has an `index.ts` that exports only what's needed by other layers.

**File:** `packages/ui/src/features/lead-form/index.ts`

```typescript
// Public API for lead-form feature
export { ContactForm } from './ui/ContactForm';
export { submitLead } from './api/submitLead';
export type { LeadFormData } from './model/validation';

// Internal implementation NOT exported:
// - FormFields.tsx (internal component)
// - validation.ts internals (only types exported)
```

**Key Patterns:**

- Public API via `index.ts`: Each slice exports only what's needed (prevents internal coupling)
- Separation of Concerns: `ui/` (components), `model/` (logic), `api/` (data fetching), `config/` (constants)
- Shared Layer: Pure utilities, no business logic

**When to Build:** P0 (Foundation for all UI code)

## Implementation Status

- Status: ✅ Complete
- QA: ✅ Completed
- Related files:
  - `packages/AGENTS.md`
  - `docs/architecture/domain-3-fsd-layer-architecture.md`
