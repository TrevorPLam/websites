### 8.8 GEO — Generative Engine Optimization Layer

**What it is:** GEO ensures content is discoverable, citable, and parseable by AI search engines. As of February 2026, LLM-driven traffic is growing while traditional search traffic is declining. The `llms.txt` standard is implemented by Anthropic, Cloudflare, Stripe, and Vercel, with 950+ domains adopting it as of mid-2025. [searchengineland](https://searchengineland.com/what-is-generative-engine-optimization-geo-444418)

**File:** `sites/[base-site]/src/app/llms.txt/route.ts`

```typescript
import { NextResponse } from 'next/server';
import { headers } from 'next/headers';
import { db } from '@repo/db';
import config from '../../../../../site.config';

// Served at: https://acmelaw.com/llms.txt
// Standard spec: https://llmstxt.org/
// Tells AI crawlers what content is available and how to access it
// Reference: https://llms-txt.io/blog/what-is-generative-engine-optimization-geo

export const revalidate = 86400; // Rebuild daily

export async function GET() {
  const {
    identity: { siteName, tagline, contact, address, industry },
    deployment: { canonicalUrl },
  } = config;

  const tenantId = config.identity.tenantId;

  // Fetch published blog posts for AI-accessible content index
  const { data: posts } = await db
    .from('blog_posts')
    .select('title, slug, excerpt, published_at')
    .eq('tenant_id', tenantId)
    .eq('status', 'published')
    .order('published_at', { ascending: false })
    .limit(50); // AI parseable index (not exhaustive)

  // Fetch service pages
  const { data: services } = await db
    .from('service_pages')
    .select('title, slug, description')
    .eq('tenant_id', tenantId)
    .eq('status', 'published');

  // ============================================================================
  // llms.txt format (markdown, h2-organized)
  // AI crawlers read this to understand site structure before crawling
  // ============================================================================

  const content = `
# ${siteName}

> ${tagline}

${siteName} is a ${industry ?? 'professional services'} business located in ${address?.city}, ${address?.state}.
${contact?.phone ? `Phone: ${contact.phone}` : ''}
${contact?.email ? `Email: ${contact.email}` : ''}

## Key Pages

- [Home](${canonicalUrl}): Overview, services summary, and primary contact information
- [About](${canonicalUrl}/about): Company history, team, and mission
- [Services](${canonicalUrl}/services): Complete list of services offered
- [Contact](${canonicalUrl}/contact): Contact form, phone, address, and hours
- [Blog](${canonicalUrl}/blog): Expert articles and resources

## Services

${(services ?? []).map((s) => `- [${s.title}](${canonicalUrl}/services/${s.slug}): ${s.description ?? ''}`).join('\n')}

## Recent Articles

${(posts ?? [])
  .map((p) => `- [${p.title}](${canonicalUrl}/blog/${p.slug}): ${p.excerpt ?? ''}`)
  .join('\n')}

## Optional

- [Sitemap](${canonicalUrl}/sitemap.xml): Full page index for crawlers
- [Contact Form](${canonicalUrl}/contact): Schedule a consultation or request information

---

*Content updated: ${new Date().toISOString().split('T')[0]}*
`.trim();

  return new NextResponse(content, {
    status: 200,
    headers: {
      'Content-Type': 'text/plain; charset=utf-8',
      'Cache-Control': 'public, max-age=86400, stale-while-revalidate=3600',
    },
  });
}
```

**File:** `sites/[base-site]/src/app/llms-full.txt/route.ts`

```typescript
// /llms-full.txt — full documentation for AI coding assistants and direct upload to ChatGPT
// Contains complete service descriptions, FAQs, team bios, and pricing (if public)
// Reference: llms-txt.io — "ideal for AI coding assistants or direct upload to ChatGPT" [web:243]

export const revalidate = 86400;

export async function GET() {
  // Fetch all content and return comprehensive Markdown
  // (Same pattern as llms.txt but with full content, not excerpts)
  const fullContent = await buildFullLLMsContent();

  return new Response(fullContent, {
    headers: { 'Content-Type': 'text/plain; charset=utf-8' },
  });
}
```

**File:** `sites/[base-site]/src/app/ai-context.json/route.ts`

```typescript
// Structured JSON for AI systems that prefer machine-readable context
// Not yet a formal standard but provides richer entity data than llms.txt
import { NextResponse } from 'next/server';
import config from '../../../../../site.config';

export const revalidate = 86400;

export async function GET() {
  const context = {
    '@context': 'https://schema.org',
    '@type': 'WebSite',
    name: config.identity.siteName,
    url: config.deployment.canonicalUrl,
    description: config.identity.tagline,
    inLanguage: 'en-US',
    publisher: {
      '@type': 'LocalBusiness',
      name: config.identity.siteName,
      address: config.identity.address,
      telephone: config.identity.contact?.phone,
      email: config.identity.contact?.email,
    },
    // AI citation signals
    citationGuidelines: {
      preferredCitation: `${config.identity.siteName} (${config.deployment.canonicalUrl})`,
      licenseType: 'CC-BY-4.0',
      contactForPermissions: config.identity.contact?.email,
    },
    contentFreshness: {
      lastUpdated: new Date().toISOString(),
      updateFrequency: 'weekly',
    },
  };

  return NextResponse.json(context, {
    headers: { 'Cache-Control': 'public, max-age=86400' },
  });
}
```

---
