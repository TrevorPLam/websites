### 8.5 Complete JSON-LD Structured Data System

**File:** `packages/seo/src/structured-data.ts`

```typescript
// ============================================================================
// JSON-LD STRUCTURED DATA LIBRARY
// All types derived from schema.org (validated via Google Rich Results Test)
// GEO note: schema.org provides 3× likelihood of AI Overview citation [web:243]
// ============================================================================

export type LocalBusinessSchema = {
  '@context': 'https://schema.org';
  '@type': string | string[];
  name: string;
  description: string;
  url: string;
  telephone?: string;
  email?: string;
  address?: {
    '@type': 'PostalAddress';
    streetAddress?: string;
    addressLocality: string;
    addressRegion: string;
    postalCode?: string;
    addressCountry: string;
  };
  geo?: {
    '@type': 'GeoCoordinates';
    latitude: number;
    longitude: number;
  };
  openingHoursSpecification?: Array<{
    '@type': 'OpeningHoursSpecification';
    dayOfWeek: string[];
    opens: string;
    closes: string;
  }>;
  image?: string[];
  priceRange?: string;
  servesCuisine?: string; // Restaurant only
  hasOfferCatalog?: {
    '@type': 'OfferCatalog';
    name: string;
    itemListElement: Array<{
      '@type': 'Offer';
      itemOffered: { '@type': 'Service'; name: string };
    }>;
  };
  aggregateRating?: {
    '@type': 'AggregateRating';
    ratingValue: string;
    reviewCount: string;
  };
  sameAs?: string[]; // Social profiles
};

export type FAQSchema = {
  '@context': 'https://schema.org';
  '@type': 'FAQPage';
  mainEntity: Array<{
    '@type': 'Question';
    name: string;
    acceptedAnswer: {
      '@type': 'Answer';
      text: string;
    };
  }>;
};

export type BreadcrumbSchema = {
  '@context': 'https://schema.org';
  '@type': 'BreadcrumbList';
  itemListElement: Array<{
    '@type': 'ListItem';
    position: number;
    name: string;
    item: string;
  }>;
};

export type ArticleSchema = {
  '@context': 'https://schema.org';
  '@type': 'Article';
  headline: string;
  description: string;
  image: string;
  author: { '@type': 'Person' | 'Organization'; name: string; url?: string };
  publisher: { '@type': 'Organization'; name: string; logo: { '@type': 'ImageObject'; url: string } };
  datePublished: string;
  dateModified: string;
  mainEntityOfPage: { '@type': 'WebPage'; '@id': string };
};

// ============================================================================
// FACTORIES
// ============================================================================

import type { SiteConfig } from '@repo/config-schema';

export function buildLocalBusinessSchema(config: SiteConfig): LocalBusinessSchema {
  const { identity, contact, assets } = config;
  const industryTypeMap: Record<string, string | string[]> = {
    'law': 'LegalService',
    'hvac': ['HomeAndConstructionBusiness', 'Plumber'],
    'restaurant': 'Restaurant',
    'dental': 'Dentist',
    'medical': 'MedicalBusiness',
    'realEstate': 'RealEstateAgent',
    'accounting': 'AccountingService',
    'default': 'LocalBusiness',
  };

  const schemaType = industryTypeMap[identity.industry ?? 'default'] ?? 'LocalBusiness';

  return {
    '@context': 'https://schema.org',
    '@type': schemaType,
    name: identity.siteName,
    description: identity.tagline ?? '',
    url: config.deployment.canonicalUrl,
    telephone: identity.contact?.phone,
    email: identity.contact?.email,

    address: identity.address
      ? {
          '@type': 'PostalAddress',
          streetAddress: identity.address.street,
          addressLocality: identity.address.city,
          addressRegion: identity.address.state,
          postalCode: identity.address.zip,
          addressCountry: 'US',
        }
      : undefined,

    geo: identity.coordinates
      ? {
          '@type': 'GeoCoordinates',
          latitude: identity.coordinates.lat,
          longitude: identity.coordinates.lng,
        }
      : undefined,

    openingHoursSpecification: identity.hours?.map((schedule) => ({
      '@type': 'OpeningHoursSpecification',
      dayOfWeek: schedule.days,
      opens: schedule.opens,
      closes: schedule.closes,
    })),

    image: assets.galleryImages?.slice(0, 3) ?? [assets.ogImage ?? ''],

    priceRange: identity.priceRange ?? undefined,

    hasOfferCatalog: identity.services?.length
      ? {
          '@type': 'OfferCatalog',
          name: `${identity.siteName} Services`,
          itemListElement: identity.services.map((service) => ({
            '@type': 'Offer',
            itemOffered: { '@type': 'Service', name: service.name },
          })),
        }
      : undefined,

    aggregateRating:
      identity.reviewSummary?.count && identity.reviewSummary.count > 0
        ? {
            '@type': 'AggregateRating',
            ratingValue: String(identity.reviewSummary.average),
            reviewCount: String(identity.reviewSummary.count),
          }
        : undefined,

    sameAs: [
      identity.social?.google,
      identity.social?.facebook,
      identity.social?.instagram,
      identity.social?.linkedin,
      identity.social?.yelp,
    ].filter(Boolean) as string[],
  };
}

export function buildFAQSchema(
  faqs: Array<{ question: string; answer: string }>
): FAQSchema {
  return {
    '@context': 'https://schema.org',
    '@type': 'FAQPage',
    mainEntity: faqs.map((faq) => ({
      '@type': 'Question',
      name: faq.question,
      acceptedAnswer: {
        '@type': 'Answer',
        // Text should be plain string — no HTML (Google strips it anyway)
        text: faq.answer,
      },
    })),
  };
}

export function buildBreadcrumbSchema(
  crumbs: Array<{ name: string; url: string }>
): BreadcrumbSchema {
  return {
    '@context': 'https://schema.org',
    '@type': 'BreadcrumbList',
    itemListElement: crumbs.map((crumb, index) => ({
      '@type': 'ListItem',
      position: index + 1,
      name: crumb.name,
      item: crumb.url,
    })),
  };
}

export function buildArticleSchema(
  config: SiteConfig,
  post: {
    title: string;
    excerpt: string;
    coverImage: string;
    publishedAt: string;
    updatedAt: string;
    author: { name: string; url?: string };
    url: string;
  }
): ArticleSchema {
  return {
    '@context': 'https://schema.org',
    '@type': 'Article',
    headline: post.title,
    description: post.excerpt,
    image: post.coverImage,
    author: {
      '@type': 'Person',
      name: post.author.name,
      url: post.author.url ?? config.deployment.canonicalUrl,
    },
    publisher: {
      '@type': 'Organization',
      name: config.identity.siteName,
      logo: {
        '@type': 'ImageObject',
        url: config.assets.logo ?? config.assets.ogImage ?? '',
      },
    },
    datePublished: post.publishedAt,
    dateModified: post.updatedAt,
    mainEntityOfPage: {
      '@type': 'WebPage',
      '@id': post.url,
    },
  };
}

// ============================================================================
// RENDERER COMPONENT
// Usage: <JsonLd schema={buildLocalBusinessSchema(config)} />
// ============================================================================

export function JsonLd({ schema }: { schema: object }) {
  return (
    <script
      type="application/ld+json"
      dangerouslySetInnerHTML={{ __html: JSON.stringify(schema, null, 0) }}
    />
  );
}
```

**Usage in a page (stacking multiple schemas):** [seobotai](https://seobotai.com/tools/faq-schema-generator/)

```typescript
// sites/sterling-law/src/app/page.tsx
import { JsonLd, buildLocalBusinessSchema, buildFAQSchema } from '@repo/seo/structured-data';
import config from '../../../../../site.config';

export default function HomePage() {
  const faqs = [
    {
      question: 'Do you offer free consultations?',
      answer: 'Yes, Sterling Law offers a complimentary 30-minute initial consultation for all new clients. Contact us to schedule yours.',
    },
    {
      question: 'What areas do you serve?',
      answer: `We serve clients throughout the Dallas-Fort Worth metroplex, including Plano, Allen, McKinney, Frisco, and surrounding communities.`,
    },
    {
      question: 'What types of law do you practice?',
      answer: 'Our practice areas include family law, estate planning, business formation, and real estate transactions.',
    },
  ];

  return (
    <>
      {/* LocalBusiness schema — anchors the site to a real-world entity */}
      <JsonLd schema={buildLocalBusinessSchema(config)} />

      {/* FAQPage schema — drives "People Also Ask" and AI citations */}
      <JsonLd schema={buildFAQSchema(faqs)} />

      <main>
        {/* Page content... */}
      </main>
    </>
  );
}
```

---
