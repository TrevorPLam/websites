# 25.1 Philosophy

**What it is:** Edge-based A/B testing assigns visitors to experiment buckets using a deterministic cookie set in middleware — before the request ever hits the origin server. Zero CLS, zero layout shift, zero flash of wrong content. The variant renders server-side in the correct bucket from the first byte. [plasmic](https://www.plasmic.app/blog/nextjs-ab-testing)

**Why middleware, not client-side:** Client-side A/B testing (Google Optimize style) requires the page to load first, then swap content — causing a flash of original content (FOOC). Middleware cookie + server render means the variant is the first thing the browser sees.

**Architecture:** Middleware reads the `ab_bucket` cookie. If absent, assigns deterministically based on tenant + path + visitor fingerprint. Rewrites the request to `/[bucket]/page` path internally (transparent to visitor URL).
