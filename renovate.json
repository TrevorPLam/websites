/**
 * @file renovate.json
 * @role config
 * @summary Renovate configuration for automated dependency updates.
 *
 * @entrypoints
 * - Renovate bot reads this configuration for dependency management
 *
 * @exports
 * - N/A
 *
 * @depends_on
 * - External: Renovate bot
 *
 * @used_by
 * - Renovate automated dependency updates
 *
 * @runtime
 * - environment: ci/cd
 * - side_effects: automated pull requests
 *
 * @data_flow
 * - inputs: package.json files
 * - outputs: dependency update pull requests
 *
 * @invariants
 * - Patch updates auto-merge if CI passes
 * - Minor updates require approval
 * - Major updates require manual review
 *
 * @gotchas
 * - Auto-merge only works if CI checks pass
 * - Monorepo requires proper workspace configuration
 *
 * @verification
 * - Renovate creates PRs for dependency updates
 * - Patch updates auto-merge when CI is green
 *
 * @status
 * - confidence: high
 * - last_audited: 2026-02-10
 */

{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:base",
    ":dependencyDashboard",
    ":semanticCommits",
    ":automergeDigest",
    ":automergeBranch",
    "group:allNonMajor",
    "group:recommended"
  ],
  "timezone": "UTC",
  "schedule": ["before 6am on monday"],
  "labels": ["dependencies", "renovate"],
  "assignees": ["@maintainer-team"],
  "reviewers": ["@maintainer-team"],

  "automerge": true,
  "automergeType": "pr",
  "automergeStrategy": "auto",

  "packageRules": [
    {
      "description": "Auto-merge patch updates for dev dependencies",
      "matchDepTypes": ["devDependencies"],
      "matchUpdateTypes": ["patch"],
      "automerge": true
    },
    {
      "description": "Require approval for minor updates of production dependencies",
      "matchDepTypes": ["dependencies", "peerDependencies"],
      "matchUpdateTypes": ["minor"],
      "automerge": false,
      "stabilityDays": 3
    },
    {
      "description": "Require manual review for major updates",
      "matchUpdateTypes": ["major"],
      "automerge": false,
      "stabilityDays": 7
    },
    {
      "description": "Group React ecosystem updates together",
      "matchPackagePatterns": ["@types/react", "@types/react-dom", "react", "react-dom"],
      "groupName": "React ecosystem",
      "automerge": false
    },
    {
      "description": "Group Next.js updates together",
      "matchPackagePatterns": ["next", "@next/*"],
      "groupName": "Next.js ecosystem",
      "automerge": false
    },
    {
      "description": "Group TypeScript updates together",
      "matchPackagePatterns": ["typescript", "@types/*"],
      "groupName": "TypeScript ecosystem",
      "automerge": false
    }
  ],

  "vulnerabilityAlerts": {
    "enabled": true,
    "labels": ["security", "critical"],
    "assignees": ["@maintainer-team"],
    "schedule": ["at any time"]
  },

  "lockFileMaintenance": {
    "enabled": true,
    "automerge": true,
    "schedule": ["before 6am on the first day of the month"]
  },

  "prConcurrentLimit": 3,
  "branchConcurrentLimit": 5,
  "prHourlyLimit": 2
}
