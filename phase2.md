```json
{"phase_id":"PHASE-2","phase_name":"Policy Corpus (Authoritative Rules)","files":[{"path":"/.repo/policy/CONSTITUTION.md","type":"markdown","content":"# /.repo/policy/CONSTITUTION.md\nThis file is immutable unless the solo founder explicitly approves changes.\n\n## Article 1: Final Authority\nThe solo founder is the final authority for any ambiguity, conflict, or decision.\n\n## Article 2: Verifiable over Persuasive\nWork is not “done” without verification evidence. Proof beats persuasion.\n\n## Article 3: No Guessing\nIf something is not explicitly known from repo docs, manifest, or code:\n- mark it as UNKNOWN\n- route to HITL (or explicit questions)\n- do not proceed on that uncertain portion\n\n## Article 4: Incremental Delivery\nShip small, reviewable, testable increments.\nLarge tasks must be decomposed into smaller tasks. No mega-PRs without explicit approval.\n\n## Article 5: Strict Traceability\nEvery meaningful change must be traceable to an explicit task definition and include verification proof.\nCompleted tasks must be archived to preserve a compact history of what changed, why, and how it was verified.\n\n## Article 6: Safety Before Speed (Non-Coder Plain English)\nIf a change could break logins, money flows, user data, privacy, security, external services, or production behavior:\nSAFETY WINS.\nFor risky/uncertain changes: STOP → ASK (HITL) → VERIFY → THEN PROCEED.\n\n## Article 7: Per-Repo Variation Allowed\nGovernance structure is consistent, but per-repo workflow/execution may vary via manifest, packs, and repo checks.\n\n## Article 8: HITL for External Systems\nAnything involving credentials, vendor dashboards, production systems, billing, legal/compliance, or irreversible changes is HITL-gated."},{"path":"/.repo/policy/PRINCIPLES.md","type":"markdown","content":"# /.repo/policy/PRINCIPLES.md\nThese are the operating principles that sit below the Constitution.\n\n## Global rule\nFilepaths are required everywhere: PRs, Task Packets, logs, ADRs, waivers, and inline commentary.\n\n## P3 One Change Type Per PR\nA PR declares exactly one change type. If you need multiple types, split the work.\n\n## P4 Make It Shippable\nEach PR should be safe to merge and ship (or clearly blocked by HITL/waivers).\n\n## P5 Don’t Break Surprises\nIf users, security, money, or production behavior could change: call it out, add tests, add rollback plan, use HITL.\n\n## P6 Evidence Over Vibes\nShow proof: commands run, outputs, test results, links to artifacts (filepaths).\n\n## P7 UNKNOWN Is a First-Class State\nUNKNOWN is allowed and required. Mark it explicitly and route to HITL.\n\n## P8 Read Repo First\nUse /.repo docs + repo.manifest.yaml before deciding anything.\n\n## P9 Assumptions Must Be Declared\nAny assumption must be written down and labeled as an assumption.\n\n## P10 Risk Triggers a Stop\nIf risk is non-trivial: STOP → HITL → VERIFY.\n\n## P11 Prefer Guardrails Over Heroics\nPrefer checks, tooling, and automation over “trust me”.\n\n## P12 Rollback Thinking\nEvery risky change must have rollback thinking (how to undo safely).\n\n## P13 Respect Boundaries by Default\nDo not cross module boundaries unless rules allow.\n\n## P14 Localize Complexity (Option B)\nPut complexity where it belongs. Keep it contained. Avoid spreading special cases.\n\n## P15 Consistency Beats Novelty\nPrefer existing patterns and names. Novelty requires justification.\n\n## P16 Decisions Written Down (Token-Optimized)\nRecord decisions in the smallest durable place (ADR only when triggered).\n\n## P17 PR Narration\nPR must explain: what, why, filepaths, how verified, risks, rollback.\n\n## P18 No Silent Scope Creep\nDo not expand scope without updating Task Packet and calling it out.\n\n## P19 Docs Age With Code\nWhen code changes, docs must change too if they describe behavior.\n\n## P20 Examples Are Contracts\nExamples define expected behavior. If code changes, examples must be updated.\n\n## P21 Naming Matters\nNames must be clear. Avoid confusing abbreviations.\n\n## P22 Waivers Rare + Temporary\nWaivers are not permanent. They expire. They require a plan.\n\n## P23 ADR Required When Triggered\nIf an ADR trigger is met, create an ADR. No exceptions.\n\n## P24 Logs Required for Non-Docs\nNon-doc-only changes require agent logs + trace logs + reasoning summary.\n\n## P25 Token-Optimized TODO Discipline\nUse P0/P1/P2 TODO files + archive completed work to keep active context compact."},{"path":"/.repo/policy/QUALITY_GATES.md","type":"markdown","content":"# /.repo/policy/QUALITY_GATES.md\nQuality Gates are the merge rules. governance-verify enforces them.\n\n## Merge policy\nPolicy: soft block with auto-generated waivers for waiverable gate failures.\nMeaning: if a waiverable gate fails, a waiver is generated and must be approved/expired rules apply.\n\n## Hard gates (must pass; not waiverable)\nThese are “governance integrity” gates. If these fail, the repo is not self-governing.\n- Required artifacts are missing for the declared change type (Task Packet, required logs, trace, ADR/HITL when triggered).\n- Trace log is missing or invalid against /.repo/templates/AGENT_TRACE_SCHEMA.json.\n- Required HITL items are not Completed (or validly waived where policy allows).\n- Waiver referenced is missing or expired.\n- governance-verify fails.\n\n## Waiverable gates (waiver required when failing)\n- Coverage targets (gradual ratchet).\n- Performance/bundle budgets (strict with fallback to default).\n- Warning budgets (zero warnings; waiver required if warnings exist).\nNote: waivers must be rare + temporary.\n\n## Coverage strategy: gradual ratchet\n- Do not require perfection immediately.\n- Each change should improve coverage or keep it from regressing.\n- Over time, the minimum bar rises.\n\n## Performance budgets: strict with fallback to default\n- Repo may define explicit budgets.\n- If missing, use the default budgets described in this file (or referenced standard).\n- If budgets are exceeded: fail + require waiver + remediation plan.\n\n## Warnings: zero warnings\nWarnings are treated as failures. If a warning exists, it must be fixed or waived.\n\n## PR size policy: no limits\nNo hard PR size limits. Constitution still requires decomposition into shippable increments.\n\n## Required checks\ngovernance_verify_checks: all\nMeaning: governance-verify checks everything it knows how to check for this repo type."},{"path":"/.repo/policy/SECURITY_BASELINE.md","type":"markdown","content":"# /.repo/policy/SECURITY_BASELINE.md\nThis file defines the minimum security rules.\n\n## Absolute prohibitions\n- Secrets/tokens/keys must never be committed or logged (absolute prohibition).\n\n## Dependency vulnerabilities\nIf dependency vulnerabilities are detected:\n- ALWAYS create HITL item(s)\n- do not merge until HITL is Completed (or explicitly waived by human with expiration)\n\n## Security check frequency\nSecurity checks run on every PR.\n\n## Security review triggers\nTrigger IDs: [1,2,4,5,6,8,9,10]\nThese IDs are a stable registry for this standard.\nDefault meanings (editable only by human in this file if needed):\n1) Auth/login behavior change\n2) Money/payment flow change\n4) External service integration change\n5) Sensitive data handling change\n6) Permission/privacy change\n8) Production config/keys change\n9) Cryptography/security control change\n10) Dependency / supply-chain risk change\n\n## Forbidden patterns\nForbidden patterns list: [\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\"]\nThese are placeholders for repo-specific patterns (strings/regex rules) enforced by check:security.\nIf a pattern is unknown, mark UNKNOWN and create HITL.\n\n## Mandatory HITL actions\nMandatory HITL action IDs: [1,2,3,4,5,6,7,8]\nDefault meanings (editable only by human if needed):\n1) Human approves security risk assessment\n2) Human confirms no secrets exposed\n3) Human reviews dependency vulnerability report (if any)\n4) Human confirms login/security test evidence for risky changes\n5) Human confirms money-flow test evidence for risky changes\n6) Human approves waiver (if needed) with expiration\n7) Human confirms rollback plan for risky changes\n8) Human confirms external system steps completed (if any)\n\n## Evidence requirements\nEvidence requirements: standard\nMeaning: show what was run and the results (filepaths + command outputs summarized)."},{"path":"/.repo/policy/BOUNDARIES.md","type":"markdown","content":"# /.repo/policy/BOUNDARIES.md\nThis file defines module boundaries. Boundaries are enforced.\n\n## Model\nhybrid_domain_feature_layer\n\n## Directory pattern\nsrc/<domain>/<feature>/<layer>/\nShared platform directory: src/platform/\n\n## Default allowed import direction (Plain English)\n- UI layer may depend on Domain layer\n- Domain layer may depend on Data layer\n- Data layer may depend on Platform (shared) layer\n- Platform depends on nothing\n\nMachine form:\nui → domain → data → shared_platform\n\n## Cross-feature rule\nCross-feature imports require an ADR.\n\n## Enforcement method\nhybrid_static_checker_plus_manifest\nMeaning: a static boundary checker runs AND the manifest contains explicit edges for allowed exceptions.\n\n## Exceptions\n- Small exception: allowed only with explicit Task Packet justification + filepaths.\n- Large exception: requires ADR.\nAll exceptions must be represented as explicit edges in /.repo/repo.manifest.yaml.\n\n## Violation severity\nwaiver_plus_auto_task\nMeaning: if boundaries are violated:\n- PR is blocked unless fixed or waived\n- if waived, an auto-task is created in TODOs with remediation plan\n\n## Boundary visibility\ninline_comments_plus_summary\nMeaning: boundary-related decisions must be visible in code comments where relevant and summarized in PR narration.\n\n## Practical examples (Plain English)\nAllowed:\n- src/sales/checkout/ui/* imports src/sales/checkout/domain/*\nForbidden:\n- UI imports Data directly\n- Any layer imports another feature in a different feature folder without ADR\n- Anything imports Platform and then re-exports it as a shortcut across features"},{"path":"/.repo/policy/HITL.md","type":"markdown","content":"# /.repo/policy/HITL.md\nHITL = Human-In-The-Loop. This is the single binding place for human-required actions.\n\n## Storage model\nSplit, same folder:\n- Index (this file): /.repo/policy/HITL.md\n- Items: /.repo/hitl/HITL-XXXX.md\n\n## Rule: minimal human effort\nThe human does the smallest action possible (usually: set Status + add Evidence line).\nAgents do all mechanical work: syncing PR body, archiving, and governance-verify reruns.\n\n## Categories\n- External Integration\n- Clarification\n- Risk\n- Feedback\n- Vendor\n\n## Statuses\nPending | In Progress | Blocked | Completed | Superseded\n\n## Merge blocking rule\nIf a PR has any required HITL item not in Completed status (or not validly waived), merge is blocked.\n\n## Who can do what\n- Agents may create HITL items and propose wording.\n- Only the human may mark HITL items Completed.\n- Agents must auto-sync HITL status changes into PR body and archive when completed.\n\n## External systems detection (how to trigger HITL)\nDetection is keywords + manifest + change type:\n- If the change type implies external systems (security, release, schema), HITL is required.\n- If the manifest command involves external credentials/dashboards, HITL is required.\n- If keywords appear (credentials, token, billing, app store, vendor dashboard, prod deploy, payment, oauth), HITL is required.\n\n## HITL item file format (HITL-XXXX.md)\nRequired fields:\n- ID (HITL-XXXX)\n- Category\n- Required For (change types)\n- Owner (human)\n- Reviewer (human)\n- Status\n- Date Required\n- Date Completed\n- Summary\n- Required Human Action steps\n- Evidence of completion (filepaths or notes; no secrets)\n- Related artifacts (filepaths): PR, ADR, Waiver, Task Packet\n\n## Index tables\n### Active\n|ID|Category|Status|Summary|Filepath|\n|---|---|---|---|---|\n\n### Archived\n|ID|Category|Status|Summary|Filepath|\n|---|---|---|---|---|\n\n## Archiving\nWhen an item becomes Completed or Superseded:\n- Agent moves it from Active to Archived table\n- Agent adds Archived On: YYYY-MM-DD in the item file\n- Agent updates PR body HITL section to reflect completion"}],"acceptance_criteria":["All files exist at the specified filepaths.","Plain English rules are present: no guessing, UNKNOWN, evidence, merge blocking.","Boundaries and security rules match locked decisions."],"notes":"This Phase 2 replaces the placeholder and bakes in all locked decisions from this chat."}
```